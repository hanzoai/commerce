(function(t){function n(t,o){if("function"==typeof o)return n.load(t,o);if({}.hasOwnProperty.call(n.cache,t))return n.cache[t];var r=n.resolve(t);if(!r)throw new Error("Failed to resolve module "+t);var i={id:t,require:n,filename:t,exports:{},loaded:!1,parent:null,children:[]},c=t.slice(0,t.lastIndexOf("/")+1);return n.cache[t]=i.exports,r.call(i.exports,i,i.exports,c,t,e),i.loaded=!0,n.cache[t]=i.exports}var e={title:"browser",browser:!0,env:{},argv:[],nextTick:function(t){setTimeout(t,0)},cwd:function(){return"/"},chdir:function(){}};n.modules={},n.cache={},n.resolve=function(t){return{}.hasOwnProperty.call(n.modules,t)?n.modules[t]:void 0},n.define=function(t,e){n.modules[t]=e},t.require=n,n.define("./analytics",function(t,e,o,r,i){var c,u;u=n("./integration"),t.exports=c=function(){function t(){this.integrations=[],"undefined"!=typeof location&&(this._debug=location.search.indexOf("v=1")!==-1),u.prototype.log=function(t){return function(){return t.log.apply(t,arguments)}}(this)}return t.prototype.ready=function(t){return null==t&&(t=function(){}),this.log("Analytics.ready"),t()},t.prototype.initialize=function(t){var e,o,r,i,c,u,l;for(null==t&&(t={}),this.log("Analytics.initialize",t),null==t.integrations&&(t.integrations=[]),u=t.integrations,l=[],o=0,c=u.length;o<c;o++)i=u[o],e=n("./integrations/"+i.type),r=new e(i),r.init(),r.load(),l.push(this.integrations.push(r));return l},t.prototype.call=function(t,n,e,o,r){var i,c,u,l,a;for(null==r&&(r=function(){}),this.log("Analytics.call",t,n,e,o),l=this.integrations,a=[],i=0,u=l.length;i<u;i++)c=l[i],null!=c[t]?a.push(c[t].call(c,n,e,o,r)):a.push(c.track.call(c,n,e,o,r));return a},t.prototype.identify=function(t,n,e,o){return this.log("Analytics.identify",arguments),this.call("identify",t,n,e,o)},t.prototype.track=function(t,n,e,o){var r;return this.log("Analytics.track",t,n,e),r=t.replace(/\s+/g,""),r=r[0].toLowerCase()+r.substring(1),this.call(r,t,n,e,o)},t.prototype.page=function(t,n,e,o,r){return this.log("Analytics.page",arguments),this.call("page",t,n,e,o,r)},t.prototype.debug=function(t){return null==t&&(t=!0),this._debug=t},t.prototype.log=function(){if(this._debug)return"undefined"!=typeof console&&null!==console?console.log.apply(console,arguments):void 0},t.prototype.alias=function(){},t.prototype.group=function(){},t.prototype.load=function(){},t.prototype.off=function(){},t.prototype.on=function(){},t.prototype.once=function(){},t.prototype.reset=function(){},t.prototype.trackClick=function(){},t.prototype.trackForm=function(){},t.prototype.trackLink=function(){},t.prototype.trackSubmit=function(){},t.prototype.user=function(){},t}()}),n.define("./integration",function(t,e,o,r,i){var c,u,l,a;a=n("./loaders/script"),l=n("./loaders/img"),u=n("./loaders/iframe"),t.exports=c=function(){function t(){}return t.prototype.init=function(){return this.log("Integration.init")},t.prototype.load=function(t){var n,e;if(null==t&&(t=function(){}),this.log("Integration.load",this.src),null!=(null!=(n=this.src)?n.type:void 0)&&null!=(null!=(e=this.src)?e.url:void 0))switch(this.src.type){case"script":return a(this.src,t);case"img":return l(this.src,t);case"iframe":return u(this.src,t)}},t}()}),n.define("./loaders/script",function(t,e,o,r,i){var c;c=n("./utils").onload,t.exports=function(t,n){var e,o,r,i,u,l;if(u=document.createElement("script"),c(u,n),u.async=null!=(r=t.async)?r:1,u.src=t.url,null!=t.attrs){i=t.attrs;for(o in i)l=i[o],u.setAttribute(o,l)}return null!=t.text&&(u.text=""+t.text),e=document.head||document.getElementsByTagName("head")[0],e.parentNode.insertBefore(u,e),u}}),n.define("./utils",function(t,n,e,o,r){n.onload=function(t,n){var e,o;return e=function(t,n){return t.addEventListener("load",function(t,e){return n(null,e)},!1),t.addEventListener("error",function(e){var o;return o=new Error("failed to load the script '"+t.src+"'"),o.event=e,n(o)},!1)},o=function(t,n){return t.attachEvent("onreadystatechange",function(e){if(/complete|loaded/.test(t.readyState))return n(null,e)}),t.attachEvent("onerror",function(e){var o;return o=new Error("failed to load the script '"+t.src+"'"),o.event=e||window.event,n(o)})},t.addEventListener?e(t,n):o(t,n)}}),n.define("./loaders/img",function(t,e,o,r,i){var c;c=n("./utils").onload,t.exports=function(t,n){var e;return e=new Image,c(e,n),e.width=1,e.height=1,e.src=t.url,e}}),n.define("./loaders/iframe",function(t,e,o,r,i){var c;c=n("./utils").onload,t.exports=function(t,n){var e,o;return o=document.createElement("iframe"),c(o,n),o.width=1,o.height=1,o.style.display="none",o.src=t.url,e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(o,e),o}}),n.define("./integrations",function(t,e,o,r,i){t.exports={Generic:n("./integrations/generic"),FacebookAudiences:n("./integrations/facebook-audiences"),FacebookConversions:n("./integrations/facebook-conversions"),GoogleAdWords:n("./integrations/google-adwords"),GoogleAnalytics:n("./integrations/google-analytics")}}),n.define("./integrations/generic",function(t,e,o,r,i){var c,u,l=function(t,n){function e(){this.constructor=t}for(var o in n)a.call(n,o)&&(t[o]=n[o]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},a={}.hasOwnProperty;u=n("./integration"),t.exports=c=function(t){function n(t){this.opts=t,null==this.src&&(this.src=this.opts.src),this.fn=new Function(this.opts.code)}return l(n,t),n.prototype.track=function(t,n,e,o){var r;if(null==o&&(o=function(){}),t===this.opts.event){this.log("Generic.track",this.opts.name,t,n,e);try{return this.fn(t,n,e,o)}catch(t){return r=t,this.log("Generic integration failed, "+r.toString())}}},n}(u)}),n.define("./integrations/facebook-audiences",function(t,e,o,r,i){var c,u,l,a=function(t,n){function e(){this.constructor=t}for(var o in n)s.call(n,o)&&(t[o]=n[o]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},s={}.hasOwnProperty;u=n("./integration"),l=function(t){return"string"==typeof t?t:"number"==typeof t?t.toFixed(2):void 0},t.exports=c=function(t){function n(t){this.opts=t}return a(n,t),n.prototype.src={type:"script",url:"//connect.facebook.net/en_US/fbevents.js"},n.prototype.init=function(){var t;if(null==window.fbq)return t=window.fbq=function(){t.callMethod?t.callMethod.apply(t,arguments):t.queue.push(arguments)},window._fbq||(window._fbq=t),t.push=t,t.loaded=!0,t.version="2.0",t.queue=[],t("init",this.opts.id),t("track","PageView")},n.prototype.page=function(t,n,e,o,r){return null==e&&(e={}),null==o&&(o={}),null==r&&(r=function(){}),this.log("FacebookAudiences.page",arguments),fbq("track","ViewContent"),r(null)},n.prototype.track=function(t,n,e,o){switch(null==o&&(o=function(){}),t){case"Initiate Checkout":fbq("track","InitiateCheckout");break;case"Add Payment Info":fbq("track","AddPaymentInfo");break;case"Lead":fbq("track","Lead");break;case"Complete Registration":fbq("track","CompleteRegistration");break;case"Search":fbq("track","Search");break;case"Add to Wishlist":fbq("track","AddToWishList")}return o(null)},n.prototype.viewedProduct=function(t,n,e,o){return null==o&&(o=function(){}),this.log("FacebookAudiences.viewedProduct",arguments),fbq("track","ViewContent"),o(null)},n.prototype.addedProduct=function(t,n,e,o){return null==o&&(o=function(){}),this.log("FacebookAudiences.addedProduct",arguments),fbq("track","AddToCart"),o(null)},n.prototype.completedOrder=function(t,n,e,o){var r;return null==o&&(o=function(){}),this.log("FacebookAudiences.completedOrder",arguments),fbq("track","Purchase",{value:l(n.total),currency:null!=(r=n.currency)?r:"USD"}),o(null)},n}(u)}),n.define("./integrations/facebook-conversions",function(t,e,o,r,i){var c,u,l=function(t,n){function e(){this.constructor=t}for(var o in n)a.call(n,o)&&(t[o]=n[o]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},a={}.hasOwnProperty;u=n("./integration"),t.exports=c=function(t){function n(t){this.opts=t}return l(n,t),n.prototype.src={type:"script",url:"//connect.facebook.net/en_US/fbds.js"},n.prototype.init=function(){if(null==window._fbq)return window._fbq=[]},n.prototype.load=function(){if("undefined"==typeof _fbq||null===_fbq||!_fbq.loaded)return n.__super__.load.apply(this,arguments),_fbq.loaded=!0},n.prototype.page=function(t,n,e,o,r){return 1===arguments.length&&(n=t),this.track(n,e,o,r)},n.prototype.track=function(t,n,e,o){var r,i,c,u,l,a,s;if(null==o&&(o=function(){}),t===this.opts.event)return this.log("FacebookConversions.track",arguments),i=this.opts.id,s=null!=(c=null!=(u=n.value)?u:this.opts.value)?c:"0.00",r=null!=(l=null!=(a=n.currency)?a:this.opts.currency)?l:"USD",_fbq.push(["track",i,{value:s,currency:r}])},n}(u)}),n.define("./integrations/google-adwords",function(t,e,o,r,i){var c,u,l=function(t,n){function e(){this.constructor=t}for(var o in n)a.call(n,o)&&(t[o]=n[o]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},a={}.hasOwnProperty;u=n("./integration"),t.exports=c=function(t){function n(t){this.opts=t,this.queue=[]}return l(n,t),n.prototype.src={type:"script",url:"//www.googleadservices.com/pagead/conversion_async.js"},n.prototype.init=function(){if(null==window.google_trackConversion)return window.google_trackConversion=function(t){return function(n){return t.queue.push(n)}}(this)},n.prototype.load=function(t){return null==t&&(t=function(){}),n.__super__.load.call(this,function(n){return function(){var e,o,r,i;if(n.queue.length)for(n.log("GoogleAdWords.load","replaying events:",n.queue),i=n.queue,o=0,r=i.length;o<r;o++)e=i[o],google_trackConversion(e);return t(null)}}(this))},n.prototype.page=function(t,n,e,o,r){if(null==r&&(r=function(){}),1===arguments.length&&(n=t),n===this.opts.event)return this.log("GoogleAdWords.page",arguments),google_trackConversion({google_conversion_id:this.opts.id,google_custom_params:e,google_remarketing_only:!0}),r(null)},n.prototype.track=function(t,n,e,o){if(null==o&&(o=function(){}),t===this.opts.event)return this.log("GoogleAdWords.track",arguments),google_trackConversion({google_conversion_id:this.opts.id,google_custom_params:n,google_conversion_language:"en",google_conversion_format:"3",google_conversion_color:"ffffff",google_conversion_label:t,google_conversion_value:n.total,google_remarketing_only:!1}),o(null)},n}(u)}),n.define("./integrations/google-analytics",function(t,e,o,r,i){var c,u,l,a,s,p=function(t,n){function e(){this.constructor=t}for(var o in n)d.call(n,o)&&(t[o]=n[o]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},d={}.hasOwnProperty;u=n("./integration"),a=function(t){return"string"==typeof t&&(t=t.indexOf(".")!==-1?Math.round(parseFloat(t,10)):parseInt(t,10)),t},l=function(t){return"string"==typeof t?t:"number"==typeof t?t.toFixed(2):void 0},s=function(t){var n,e,o;null==t&&(t={}),n={};for(e in t)o=t[e],null!=o&&(n[e]=o);return n},t.exports=c=function(t){function n(t){this.opts=t}return p(n,t),n.prototype.src={type:"script",url:"//www.google-analytics.com/analytics.js"},n.prototype.init=function(){return function(t,n,e,o,r,i,c){return t.GoogleAnalyticsObject=r,t[r]=t[r]||function(){(t[r].q=t[r].q||[]).push(arguments)},t[r].l=1*new Date}(window,document,"","","ga"),window.GoogleAnalyticsObject="ga",ga("create",this.opts.id,"auto")},n.prototype.addProduct=function(t){var n;return this.log("GoogleAnalytics.addProduct",arguments),ga("ec:addProduct",s({id:null!=(n=t.id)?n:t.sku,brand:t.brand,category:t.category,coupon:t.coupon,currency:t.currency,name:t.name,price:l(t.price),quantity:t.quantity,variant:t.variant}))},n.prototype.setAction=function(t,n){return this.log("GoogleAnalytics.setAction",arguments),ga("ec:setAction",t,s(n))},n.prototype.sendEvent=function(t,n){var e,o,r,i,c;return null==n&&(n={}),this.log("GoogleAnalytics.sendEvent",arguments),o={eventAction:t},null!=n&&(o.eventCategory=n.category,o.eventLabel=n.label,o.eventValue=a(null!=(r=null!=(i=null!=(c=n.value)?c:n.total)?i:n.revenue)?r:0),o.nonInteraction=n.nonInteraction,null!=(e=n.campaign)&&(o.campaignName=e.name,o.campaignSource=e.source,o.campaignMedium=e.medium,o.campaignContent=e.content,o.campaignKeyword=e.term)),ga("send","event",s(o))},n.prototype.sendEEEvent=function(t,n){return null==n.category&&(n.category="EnhancedEcommerce"),this.sendEvent(t,n)},n.prototype.identify=function(t,n,e,o){return null==o&&(o=function(){}),this.log("GoogleAnalytics.identify",arguments),ga("set","userId",t),o(null)},n.prototype.page=function(t,n,e,o,r){return null==e&&(e={}),null==o&&(o={}),null==r&&(r=function(){}),this.log("GoogleAnalytics.page",arguments),ga("set",s(o)),ga("send","pageview",s(o)),r(null)},n.prototype.track=function(t,n,e,o){return null==o&&(o=function(){}),this.log("GoogleAnalytics.track",arguments),this.sendEvent(t,n),o(null)},n.prototype.loadEnhancedEcommerce=function(t,n){var e;return null==n&&(n={}),this.log("GoogleAnalytics.loadEnhancedEcommerce",arguments),this._enhancedEcommerceLoaded||(ga("require","ec"),this._enhancedEcommerceLoaded=!0),ga("set","&cu",null!=(e=n.currency)?e:"USD")},n.prototype.viewedProduct=function(t,n,e,o){return null==o&&(o=function(){}),this.log("GoogleAnalytics.viewedProduct",arguments),this.loadEnhancedEcommerce(t,n),this.addProduct(n),this.setAction("detail",n),this.sendEEEvent(t,n),o(null)},n.prototype.addedProduct=function(t,n,e,o){return null==o&&(o=function(){}),this.log("GoogleAnalytics.addedProduct",arguments),this.loadEnhancedEcommerce(t,n),this.addProduct(n),this.setAction("add",n),this.sendEEEvent(t,n),o(null)},n.prototype.removedProduct=function(t,n,e,o){return null==o&&(o=function(){}),this.log("GoogleAnalytics.removedProduct",arguments),this.loadEnhancedEcommerce(t,n),this.addProduct(n),this.setAction("remove",n),this.sendEEEvent(t,n),o(null)},n.prototype.completedOrder=function(t,n,e,o){var r,i,c,u,a;if(null==o&&(o=function(){}),this.log("GoogleAnalytics.completedOrder",arguments),this.loadEnhancedEcommerce(t,n),null!=n.orderId&&null!=n.products){for(u=n.products,r=0,i=u.length;r<i;r++)c=u[r],this.addProduct(c);return this.setAction("purchase",{id:n.orderId,affiliation:n.affiliation,revenue:l(null!=(a=n.total)?a:n.revenue),tax:l(n.tax),shipping:l(n.shipping),coupon:n.coupon}),this.sendEEEvent(t,n),o(null)}},n.prototype.viewedCheckoutStep=function(t,n,e,o){var r;return null==o&&(o=function(){}),this.setAction("checkout",{steps:null!=(r=n.step)?r:1,option:e}),this.sendEEEvent(t,n),o(null)},n.prototype.completedCheckoutStep=function(t,n,e,o){var r;return null==o&&(o=function(){}),this.setAction("checkout_option",{steps:null!=(r=n.step)?r:1,option:e}),this.sendEEEvent(t,n),o(null)},n}(u)}),n.define("./index",function(t,e,o,r,i){t.exports={Analytics:n("./analytics"),Integration:n("./integration"),Integrations:n("./integrations")}}),n("./index")}).call(this,this);