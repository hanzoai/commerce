(function(global){function require(file,cb){if("function"==typeof cb)return require.load(file,cb);if({}.hasOwnProperty.call(require.cache,file))return require.cache[file];var resolved=require.resolve(file);if(!resolved)throw new Error("Failed to resolve module "+file);var mod={id:file,require:require,filename:file,exports:{},loaded:!1,parent:null,children:[]},dirname=file.slice(0,file.lastIndexOf("/")+1);return require.cache[file]=mod.exports,resolved.call(mod.exports,mod,mod.exports,dirname,file,process),mod.loaded=!0,require.cache[file]=mod.exports}var process={title:"browser",browser:!0,env:{},argv:[],nextTick:function(fn){setTimeout(fn,0)},cwd:function(){return"/"},chdir:function(){}};require.modules={},require.cache={},require.resolve=function(file){return{}.hasOwnProperty.call(require.modules,file)?require.modules[file]:void 0},require.define=function(file,fn){require.modules[file]=fn},global.require=require,require.define("crowdstart.js/src",function(module,exports,__dirname,__filename,process){var Crowdstart;Crowdstart=new(require("crowdstart.js/src/crowdstart")),"undefined"!=typeof window?window.Crowdstart=Crowdstart:module.exports=Crowdstart}),require.define("crowdstart.js/src/crowdstart",function(module,exports,__dirname,__filename,process){var Crowdstart,xhr;xhr=require("xhr"),Crowdstart=function(){function Crowdstart(key1){this.key=key1}return Crowdstart.prototype.endpoint="https://api.crowdstart.com",Crowdstart.prototype.setKey=function(key){return this.key=key},Crowdstart.prototype.setStore=function(id){return this.storeId=id},Crowdstart.prototype.req=function(uri,data,cb){return xhr({uri:this.endpoint.replace(/\/$/,"")+uri,method:"POST",headers:{"Content-Type":"application/json",Authorization:this.key},json:data},function(err,res,body){return cb(res.statusCode,body,res.headers.location)})},Crowdstart.prototype.authorize=function(data,cb){var uri;return uri="/authorize",null!=this.storeId&&(uri="/store/"+this.storeId+uri),this.req("/authorize",data,cb)},Crowdstart.prototype.charge=function(data,cb){var uri;return uri="/charge",null!=this.storeId&&(uri="/store/"+this.storeId+uri),this.req("/charge",data,cb)},Crowdstart}(),module.exports=Crowdstart}),require.define("xhr",function(module,exports,__dirname,__filename,process){"use strict";function forEachArray(array,iterator){for(var i=0;i<array.length;i++)iterator(array[i])}function isEmpty(obj){for(var i in obj)if(obj.hasOwnProperty(i))return!1;return!0}function initParams(uri,options,callback){var params=uri;return isFunction(options)?(callback=options,"string"==typeof uri&&(params={uri:uri})):params=xtend(options,{uri:uri}),params.callback=callback,params}function createXHR(uri,options,callback){return options=initParams(uri,options,callback),_createXHR(options)}function _createXHR(options){function readystatechange(){4===xhr.readyState&&loadFunc()}function getBody(){var body=void 0;if(body=xhr.response?xhr.response:xhr.responseText||getXml(xhr),isJson)try{body=JSON.parse(body)}catch(e){}return body}function errorFunc(evt){return clearTimeout(timeoutTimer),evt instanceof Error||(evt=new Error(""+(evt||"Unknown XMLHttpRequest Error"))),evt.statusCode=0,callback(evt,failureResponse)}function loadFunc(){if(!aborted){var status;clearTimeout(timeoutTimer),status=options.useXDR&&void 0===xhr.status?200:1223===xhr.status?204:xhr.status;var response=failureResponse,err=null;return 0!==status?(response={body:getBody(),statusCode:status,method:method,headers:{},url:uri,rawRequest:xhr},xhr.getAllResponseHeaders&&(response.headers=parseHeaders(xhr.getAllResponseHeaders()))):err=new Error("Internal XMLHttpRequest Error"),callback(err,response,response.body)}}if("undefined"==typeof options.callback)throw new Error("callback argument missing");var called=!1,callback=function(err,response,body){called||(called=!0,options.callback(err,response,body))},failureResponse={body:void 0,headers:{},statusCode:0,method:method,url:uri,rawRequest:xhr},xhr=options.xhr||null;xhr||(xhr=options.cors||options.useXDR?new createXHR.XDomainRequest:new createXHR.XMLHttpRequest);var key,aborted,timeoutTimer,uri=xhr.url=options.uri||options.url,method=xhr.method=options.method||"GET",body=options.body||options.data||null,headers=xhr.headers=options.headers||{},sync=!!options.sync,isJson=!1;if("json"in options&&(isJson=!0,headers.accept||headers.Accept||(headers.Accept="application/json"),"GET"!==method&&"HEAD"!==method&&(headers["content-type"]||headers["Content-Type"]||(headers["Content-Type"]="application/json"),body=JSON.stringify(options.json))),xhr.onreadystatechange=readystatechange,xhr.onload=loadFunc,xhr.onerror=errorFunc,xhr.onprogress=function(){},xhr.ontimeout=errorFunc,xhr.open(method,uri,!sync,options.username,options.password),sync||(xhr.withCredentials=!!options.withCredentials),!sync&&options.timeout>0&&(timeoutTimer=setTimeout(function(){aborted=!0,xhr.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",errorFunc(e)},options.timeout)),xhr.setRequestHeader)for(key in headers)headers.hasOwnProperty(key)&&xhr.setRequestHeader(key,headers[key]);else if(options.headers&&!isEmpty(options.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in options&&(xhr.responseType=options.responseType),"beforeSend"in options&&"function"==typeof options.beforeSend&&options.beforeSend(xhr),xhr.send(body),xhr}function getXml(xhr){if("document"===xhr.responseType)return xhr.responseXML;var firefoxBugTakenEffect=204===xhr.status&&xhr.responseXML&&"parsererror"===xhr.responseXML.documentElement.nodeName;return""!==xhr.responseType||firefoxBugTakenEffect?null:xhr.responseXML}function noop(){}var window=require("global/window"),isFunction=require("is-function"),parseHeaders=require("parse-headers/parse-headers"),xtend=require("xtend/immutable");module.exports=createXHR,createXHR.XMLHttpRequest=window.XMLHttpRequest||noop,createXHR.XDomainRequest="withCredentials"in new createXHR.XMLHttpRequest?createXHR.XMLHttpRequest:window.XDomainRequest,forEachArray(["get","put","post","patch","head","delete"],function(method){createXHR["delete"===method?"del":method]=function(uri,options,callback){return options=initParams(uri,options,callback),options.method=method.toUpperCase(),_createXHR(options)}})}),require.define("global/window",function(module,exports,__dirname,__filename,process){"undefined"!=typeof window?module.exports=window:"undefined"!=typeof global?module.exports=global:"undefined"!=typeof self?module.exports=self:module.exports={}}),require.define("is-function",function(module,exports,__dirname,__filename,process){function isFunction(fn){var string=toString.call(fn);return"[object Function]"===string||"function"==typeof fn&&"[object RegExp]"!==string||"undefined"!=typeof window&&(fn===window.setTimeout||fn===window.alert||fn===window.confirm||fn===window.prompt)}module.exports=isFunction;var toString=Object.prototype.toString}),require.define("parse-headers/parse-headers",function(module,exports,__dirname,__filename,process){var trim=require("trim"),forEach=require("for-each"),isArray=function(arg){return"[object Array]"===Object.prototype.toString.call(arg)};module.exports=function(headers){if(!headers)return{};var result={};return forEach(trim(headers).split("\n"),function(row){var index=row.indexOf(":"),key=trim(row.slice(0,index)).toLowerCase(),value=trim(row.slice(index+1));"undefined"==typeof result[key]?result[key]=value:isArray(result[key])?result[key].push(value):result[key]=[result[key],value]}),result}}),require.define("trim",function(module,exports,__dirname,__filename,process){function trim(str){return str.replace(/^\s*|\s*$/g,"")}exports=module.exports=trim,exports.left=function(str){return str.replace(/^\s*/,"")},exports.right=function(str){return str.replace(/\s*$/,"")}}),require.define("for-each",function(module,exports,__dirname,__filename,process){function forEach(list,iterator,context){if(!isFunction(iterator))throw new TypeError("iterator must be a function");arguments.length<3&&(context=this),"[object Array]"===toString.call(list)?forEachArray(list,iterator,context):"string"==typeof list?forEachString(list,iterator,context):forEachObject(list,iterator,context)}function forEachArray(array,iterator,context){for(var i=0,len=array.length;i<len;i++)hasOwnProperty.call(array,i)&&iterator.call(context,array[i],i,array)}function forEachString(string,iterator,context){for(var i=0,len=string.length;i<len;i++)iterator.call(context,string.charAt(i),i,string)}function forEachObject(object,iterator,context){for(var k in object)hasOwnProperty.call(object,k)&&iterator.call(context,object[k],k,object)}var isFunction=require("is-function");module.exports=forEach;var toString=Object.prototype.toString,hasOwnProperty=Object.prototype.hasOwnProperty}),require.define("xtend/immutable",function(module,exports,__dirname,__filename,process){function extend(){for(var target={},i=0;i<arguments.length;i++){var source=arguments[i];for(var key in source)hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}module.exports=extend;var hasOwnProperty=Object.prototype.hasOwnProperty}),require.define("./order",function(module,exports,__dirname,__filename,process){module.exports={payment:{type:"stripe",account:{number:"4242424242424242",month:"12",year:"2016",cvc:"123"},metadata:{paid:"in full"}},user:{email:"suchfan@shirtlessinseattle.com",firstName:"Sam",LastName:"Ryan",company:"Peabody Conservatory of Music",phone:"555-555-5555",metadata:{sleepless:!0}},order:{currency:"usd",billingAddress:{line1:"12345 Faux Road",city:"Seattle",state:"Washington",country:"US",postalCode:"55555-5555"},shippingAddress:{line1:"12345 Faux Road",city:"Seattle",state:"Washington",country:"US",postalCode:"55555-5555"},items:[{productSlug:"doge-shirt",quantity:2}],metadata:{shippingNotes:"Ship Ship to da moon."}}}}),require.define("./api",function(module,exports,__dirname,__filename,process){var order;require("crowdstart.js/src"),order=require("./order"),$(".charge").click(function(e){return Crowdstart.charge(order,function(status,data,loc){if(console.log(status,data),null!=loc)return window.location=loc})}),$(".authorize").click(function(e){return Crowdstart.authorize(order,function(status,data,loc){if(console.log(status,data),null!=loc)return window.location=loc})})}),require("./api")}).call(this,this);