(function(e){function n(e,o){if({}.hasOwnProperty.call(n.cache,e))return n.cache[e];if("function"==typeof o)return void n.load(e,o);var r=n.resolve(e);if(!r)throw new Error("Failed to resolve module "+e);var t={id:e,require:n,filename:e,exports:{},loaded:!1,parent:null,children:[]},s=e.slice(0,e.lastIndexOf("/")+1);return n.cache[e]=t.exports,r.call(t.exports,t,t.exports,s,e),t.loaded=!0,n.cache[e]=t.exports}n.modules={},n.cache={},n.resolve=function(e){return{}.hasOwnProperty.call(n.modules,e)?n.modules[e]:void 0},n.define=function(e,o){n.modules[e]=o},n.define("xhr",function(e){function o(e,n){function o(){4===f.readyState&&d()}function r(){var e=void 0;if(f.response?e=f.response:"text"!==f.responseType&&f.responseType||(e=f.responseText||f.responseXML),v)try{e=JSON.parse(e)}catch(n){}return e}function t(e){clearTimeout(p),e instanceof Error||(e=new Error(""+(e||"unknown"))),e.statusCode=0,n(e,c)}function d(){clearTimeout(p);var e=1223===f.status?204:f.status,o=c,t=null;0!==e?(o={body:r(),statusCode:e,method:y,headers:{},url:h,rawRequest:f},f.getAllResponseHeaders&&(o.headers=i(f.getAllResponseHeaders()))):t=new Error("Internal XMLHttpRequest Error"),n(t,o,o.body)}var c={body:void 0,headers:{},statusCode:0,method:y,url:h,rawRequest:f};if("string"==typeof e&&(e={uri:e}),e=e||{},"undefined"==typeof n)throw new Error("callback argument missing");n=s(n);var f=e.xhr||null;f||(f=e.cors||e.useXDR?new a:new u);var l,p,h=f.url=e.uri||e.url,y=f.method=e.method||"GET",m=e.body||e.data,w=f.headers=e.headers||{},x=!!e.sync,v=!1;if("json"in e&&(v=!0,w.Accept||(w.Accept="application/json"),"GET"!==y&&"HEAD"!==y&&(w["Content-Type"]="application/json",m=JSON.stringify(e.json))),f.onreadystatechange=o,f.onload=d,f.onerror=t,f.onprogress=function(){},f.ontimeout=t,f.open(y,h,!x),f.withCredentials=!!e.withCredentials,!x&&e.timeout>0&&(p=setTimeout(function(){f.abort("timeout")},e.timeout+2)),f.setRequestHeader)for(l in w)w.hasOwnProperty(l)&&f.setRequestHeader(l,w[l]);else if(e.headers)throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(f.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(f),f.send(m),f}function r(){}var t=n("xhr/node_modules/global/window"),s=n("xhr/node_modules/once/once"),i=n("xhr/node_modules/parse-headers/parse-headers"),u=t.XMLHttpRequest||r,a="withCredentials"in new u?u:t.XDomainRequest;e.exports=o}),n.define("xhr/node_modules/global/window",function(n){n.exports="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{}}),n.define("xhr/node_modules/once/once",function(e){function n(e){var n=!1;return function(){return n?void 0:(n=!0,e.apply(this,arguments))}}e.exports=n,n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0})})}),n.define("xhr/node_modules/parse-headers/parse-headers",function(e){var o=n("xhr/node_modules/parse-headers/node_modules/trim"),r=n("xhr/node_modules/parse-headers/node_modules/for-each"),t=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};var n={};return r(o(e).split("\n"),function(e){var r=e.indexOf(":"),s=o(e.slice(0,r)).toLowerCase(),i=o(e.slice(r+1));"undefined"==typeof n[s]?n[s]=i:t(n[s])?n[s].push(i):n[s]=[n[s],i]}),n}}),n.define("xhr/node_modules/parse-headers/node_modules/trim",function(e,n){function o(e){return e.replace(/^\s*|\s*$/g,"")}n=e.exports=o,n.left=function(e){return e.replace(/^\s*/,"")},n.right=function(e){return e.replace(/\s*$/,"")}}),n.define("xhr/node_modules/parse-headers/node_modules/for-each",function(e){function o(e,n,o){if(!i(n))throw new TypeError("iterator must be a function");arguments.length<3&&(o=this),"[object Array]"===u.call(e)?r(e,n,o):"string"==typeof e?t(e,n,o):s(e,n,o)}function r(e,n,o){for(var r=0,t=e.length;t>r;r++)a.call(e,r)&&n.call(o,e[r],r,e)}function t(e,n,o){for(var r=0,t=e.length;t>r;r++)n.call(o,e.charAt(r),r,e)}function s(e,n,o){for(var r in e)a.call(e,r)&&n.call(o,e[r],r,e)}var i=n("xhr/node_modules/parse-headers/node_modules/for-each/node_modules/is-function");e.exports=o;var u=Object.prototype.toString,a=Object.prototype.hasOwnProperty}),n.define("xhr/node_modules/parse-headers/node_modules/for-each/node_modules/is-function",function(e){function n(e){var n=o.call(e);return"[object Function]"===n||"function"==typeof e&&"[object RegExp]"!==n||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}e.exports=n;var o=Object.prototype.toString}),n.define("./index",function(){var e,o,r;r=n("xhr"),e=function(){function e(e){this.key=e}return e.prototype.setKey=function(e){return this.key=e},e.prototype.req=function(e,n,o){return r({body:JSON.stringify(n,{uri:e,headers:{"Content-Type":"application/json",Authorization:this.key}})},function(e,n,r){return o(status,JSON.parse(r))})},e.prototype.authorize=function(e,n){return this.req("/authorize",n)},e.prototype.charge=function(e,n){return this.req("/charge",n)},e}(),"undefined"!=typeof window&&(o=window),o.Crowdstart=new e}),n("./index")}).call(this,this);
