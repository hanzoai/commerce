# Autogenerated bulkloader.yaml file.
# You must edit this file before using it. TODO: Remove this line when done.
# At a minimum address the items marked with TODO:
#  * Fill in connector and connector_options
#  * Review the property_map.
#    - Ensure the 'external_name' matches the name of your CSV column,
#      XML tag, etc.
#    - Check that __key__ property is what you want. Its value will become
#      the key name on import, and on export the value will be the Key
#      object.  If you would like automatic key generation on import and
#      omitting the key on export, you can remove the entire __key__
#      property from the property map.

# If you have module(s) with your model classes, add them here. Also
# change the kind properties to model_class.
python_preamble:
- import: base64
- import: re
- import: google.appengine.ext.bulkload.transform
- import: google.appengine.ext.bulkload.bulkloader_wizard
- import: google.appengine.ext.db
- import: google.appengine.api.datastore
- import: google.appengine.api.users
- import: bulkloader_helper

transformers:
- kind: campaign
  connector: csv
  connector_options:
    encoding: utf-8
    columns: from_header
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string

    - property: Approved
      external_name: Approved
      # Type: Boolean Stats: 1 properties of this type in this kind.
      import_transform: transform.regexp_bool('true', re.IGNORECASE)

    - property: Backers
      external_name: Backers
      # Type: Integer Stats: 1 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: Category
      external_name: Category
      # Type: Integer Stats: 1 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: Description
      external_name: Description
      # Type: String Stats: 1 properties of this type in this kind.

    - property: Enabled
      external_name: Enabled
      # Type: Boolean Stats: 1 properties of this type in this kind.
      import_transform: transform.regexp_bool('true', re.IGNORECASE)

    - property: FacebookTag
      external_name: FacebookTag
      # Type: String Stats: 1 properties of this type in this kind.

    - property: Fundee.BusinessName
      external_name: Fundee.BusinessName
      # Type: String Stats: 1 properties of this type in this kind.

    - property: Fundee.Country
      external_name: Fundee.Country
      # Type: String Stats: 1 properties of this type in this kind.

    - property: Fundee.DBA
      external_name: Fundee.DBA
      # Type: String Stats: 1 properties of this type in this kind.

    - property: Fundee.Owner
      external_name: Fundee.Owner
      # Type: String Stats: 1 properties of this type in this kind.

    - property: Fundee.PrimaryContactPhone
      external_name: Fundee.PrimaryContactPhone
      # Type: String Stats: 1 properties of this type in this kind.

    - property: Fundee.PrimaryContact
      external_name: Fundee.PrimaryContact
      # Type: String Stats: 1 properties of this type in this kind.

    - property: Fundee.TaxId
      external_name: Fundee.TaxId
      # Type: String Stats: 1 properties of this type in this kind.

    - property: Fundee.Website
      external_name: Fundee.Website
      # Type: String Stats: 1 properties of this type in this kind.

    - property: GoogleAnalytics
      external_name: GoogleAnalytics
      # Type: String Stats: 1 properties of this type in this kind.

    - property: Id
      external_name: Id
      # Type: String Stats: 1 properties of this type in this kind.

    - property: ImageUrl
      external_name: ImageUrl
      # Type: String Stats: 1 properties of this type in this kind.

    - property: OriginalUrl
      external_name: OriginalUrl
      # Type: String Stats: 1 properties of this type in this kind.

    - property: PayPalApiKeys
      external_name: PayPalApiKeys
      # Type: String Stats: 1 properties of this type in this kind.

    - property: PayPalConnected
      external_name: PayPalConnected
      # Type: Boolean Stats: 1 properties of this type in this kind.
      import_transform: transform.regexp_bool('true', re.IGNORECASE)

    - property: PitchMedia
      external_name: PitchMedia
      # Type: String Stats: 1 properties of this type in this kind.

    - property: Raised
      external_name: Raised
      # Type: Integer Stats: 1 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: StoreUrl
      external_name: StoreUrl
      # Type: String Stats: 1 properties of this type in this kind.

    - property: StripeKey
      external_name: StripeKey
      # Type: String Stats: 1 properties of this type in this kind.

    - property: StripeToken
      external_name: StripeToken
      # Type: String Stats: 1 properties of this type in this kind.

    - property: Tagline
      external_name: Tagline
      # Type: String Stats: 1 properties of this type in this kind.

    - property: Thumbnail
      external_name: Thumbnail
      # Type: String Stats: 1 properties of this type in this kind.

    - property: Title
      external_name: Title
      # Type: String Stats: 1 properties of this type in this kind.

    - property: VideoOverlayUrl
      external_name: VideoOverlayUrl
      # Type: String Stats: 1 properties of this type in this kind.

    - property: VideoUrl
      external_name: VideoUrl
      # Type: String Stats: 1 properties of this type in this kind.


- kind: contribution
  connector: csv
  connector_options:
    encoding: utf-8
    columns: from_header
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string

    - property: Email
      external_name: Email
      # Type: String Stats: 1864 properties of this type in this kind.

    - property: FundingDate
      external_name: FundingDate
      # Type: String Stats: 1864 properties of this type in this kind.

    - property: Id
      external_name: Id
      # Type: String Stats: 1864 properties of this type in this kind.

    - property: PaymentMethod
      external_name: PaymentMethod
      # Type: String Stats: 1864 properties of this type in this kind.

    - property: Perk.Description
      external_name: Perk.Description
      # Type: String Stats: 1864 properties of this type in this kind.

    - property: Perk.EstimatedDelivery
      external_name: Perk.EstimatedDelivery
      # Type: String Stats: 1864 properties of this type in this kind.

    - property: Perk.GearQuantity
      external_name: Perk.GearQuantity
      # Type: Integer Stats: 1864 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: Perk.HelmetQuantity
      external_name: Perk.HelmetQuantity
      # Type: Integer Stats: 1864 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: Perk.Id
      external_name: Perk.Id
      # Type: String Stats: 1864 properties of this type in this kind.

    - property: Perk.Price
      external_name: Perk.Price
      # Type: String Stats: 1864 properties of this type in this kind.

    - property: Perk.Title
      external_name: Perk.Title
      # Type: String Stats: 1864 properties of this type in this kind.

    - property: Status
      external_name: Status
      # Type: String Stats: 1864 properties of this type in this kind.


- kind: invite-token
  connector: csv
  connector_options:
    encoding: utf-8
    columns: from_header
  property_map:
    - property: __key__
      external_name: Id
      export_transform: transform.key_id_or_name_as_string

    - property: Email
      external_name: Email
      # Type: String Stats: 1941 properties of this type in this kind.

    - property: Expired
      external_name: Expired
      # Type: Boolean Stats: 1941 properties of this type in this kind.
      import_transform: transform.regexp_bool('true', re.IGNORECASE)

    - property: Id
      external_name: Unique Preorder Link
      export_transform: 'lambda x: "preorder.skully.com/order/" + x'

    - property: Used
      external_name: Used
      # Type: Boolean Stats: 1941 properties of this type in this kind.
      import_transform: transform.regexp_bool('true', re.IGNORECASE)


- kind: order
  connector: csv
  connector_options:
    encoding: utf-8
    columns: from_header
  property_map:
    - property: __key__
      external_name: Key
      import_transform: transform.create_foreign_key('order', key_is_id=True)

    - property: BillingAddress.City
      external_name: BillingAddress.City
      # Type: String Stats: 1 properties of this type in this kind.

    - property: BillingAddress.Country
      external_name: BillingAddress.Country
      # Type: String Stats: 1 properties of this type in this kind.

    - property: BillingAddress.Line1
      external_name: BillingAddress.Line1
      # Type: String Stats: 1 properties of this type in this kind.

    - property: BillingAddress.Line2
      external_name: BillingAddress.Line2
      # Type: String Stats: 1 properties of this type in this kind.

    - property: BillingAddress.PostalCode
      external_name: BillingAddress.PostalCode
      # Type: String Stats: 1 properties of this type in this kind.

    - property: BillingAddress.State
      external_name: BillingAddress.State
      # Type: String Stats: 1 properties of this type in this kind.

    - property: CampaignId
      external_name: CampaignId
      # Type: String Stats: 1 properties of this type in this kind.

    - property: Cancelled
      external_name: Cancelled
      # Type: Boolean Stats: 1 properties of this type in this kind.
      import_transform: transform.regexp_bool('true', re.IGNORECASE)

    - property: Charges.AmountRefunded
      external_name: Charges.AmountRefunded
      # Type: Integer Stats: 1 properties of this type in this kind.
      # import_transform: transform.none_if_empty(int)
      import_transform: bulkloader_helper.transform_eval

    - property: Charges.Amount
      external_name: Charges.Amount
      # Type: Integer Stats: 1 properties of this type in this kind.
      # import_transform: transform.none_if_empty(int)
      import_transform: bulkloader_helper.transform_eval

    - property: Charges.Captured
      external_name: Charges.Captured
      # Type: Boolean Stats: 1 properties of this type in this kind.
      # import_transform: transform.regexp_bool('true', re.IGNORECASE)
      import_transform: bulkloader_helper.transform_eval

    - property: Charges.Created
      external_name: Charges.Created
      # Type: Integer Stats: 1 properties of this type in this kind.
      # import_transform: transform.none_if_empty(int)
      import_transform: bulkloader_helper.transform_eval

    - property: Charges.Desc
      external_name: Charges.Desc
      # Type: String Stats: 1 properties of this type in this kind.
      import_transform: bulkloader_helper.transform_eval

    - property: Charges.Email
      external_name: Charges.Email
      # Type: String Stats: 1 properties of this type in this kind.
      import_transform: bulkloader_helper.transform_eval

    - property: Charges.FailCode
      external_name: Charges.FailCode
      # Type: String Stats: 1 properties of this type in this kind.
      import_transform: bulkloader_helper.transform_eval

    - property: Charges.FailMsg
      external_name: Charges.FailMsg
      # Type: String Stats: 1 properties of this type in this kind.
      import_transform: bulkloader_helper.transform_eval

    - property: Charges.FailType
      external_name: Charges.FailType
      # Type: String Stats: 1 properties of this type in this kind.
      import_transform: bulkloader_helper.transform_eval

    - property: Charges.ID
      external_name: Charges.ID
      # Type: String Stats: 1 properties of this type in this kind.
      import_transform: bulkloader_helper.transform_eval

    - property: Charges.Live
      external_name: Charges.Live
      # Type: Boolean Stats: 1 properties of this type in this kind.
      # import_transform: transform.regexp_bool('true', re.IGNORECASE)
      import_transform: bulkloader_helper.transform_eval

    - property: Charges.Paid
      external_name: Charges.Paid
      # Type: Boolean Stats: 1 properties of this type in this kind.
      # import_transform: transform.regexp_bool('true', re.IGNORECASE)
      import_transform: bulkloader_helper.transform_eval

    - property: Charges.Refunded
      external_name: Charges.Refunded
      # Type: Boolean Stats: 1 properties of this type in this kind.
      # import_transform: transform.regexp_bool('true', re.IGNORECASE)
      import_transform: bulkloader_helper.transform_eval

    - property: Charges.Statement
      external_name: Charges.Statement
      # Type: String Stats: 1 properties of this type in this kind.
      import_transform: bulkloader_helper.transform_eval

    - property: CreatedAt
      external_name: CreatedAt
      import_transform: bulkloader_helper.import_date_time('%Y-%m-%dT%H:%M:%S')

    - property: Email
      external_name: Email
      # Type: String Stats: 1 properties of this type in this kind.

    - property: Id
      external_name: Id
      # Type: String Stats: 1 properties of this type in this kind.

    - property: Items.Description
      external_name: Items.Description
      import_transform: bulkloader_helper.transform_eval

    - property: Items.DiscountAmnt
      external_name: Items.DiscountAmnt
      import_transform: bulkloader_helper.transform_eval

    - property: Items.LineNo
      external_name: Items.LineNo
      import_transform: bulkloader_helper.transform_eval

    - property: Items.Quantity
      external_name: Items.Quantity
      import_transform: bulkloader_helper.transform_eval

    - property: Items.SKU_
      external_name: Items.SKU_
      import_transform: bulkloader_helper.transform_eval

    - property: Items.Slug_
      external_name: Items.Slug_
      import_transform: bulkloader_helper.transform_eval

    - property: Locked
      external_name: Locked
      import_transform: transform.regexp_bool('true', re.IGNORECASE)

    - property: Preorder
      external_name: Preorder
      import_transform: transform.regexp_bool('true', re.IGNORECASE)

    - property: Refunded
      external_name: Refunded
      import_transform: transform.regexp_bool('true', re.IGNORECASE)

    - property: Shipped
      external_name: Shipped
      import_transform: transform.regexp_bool('true', re.IGNORECASE)

    - property: ShippingAddress.City
      external_name: ShippingAddress.City

    - property: ShippingAddress.Country
      external_name: ShippingAddress.Country

    - property: ShippingAddress.Line1
      external_name: ShippingAddress.Line1

    - property: ShippingAddress.Line2
      external_name: ShippingAddress.Line2

    - property: ShippingAddress.PostalCode
      external_name: ShippingAddress.PostalCode

    - property: ShippingAddress.State
      external_name: ShippingAddress.State

    - property: Shipping
      external_name: Shipping
      import_transform: transform.none_if_empty(int)

    - property: Subtotal
      external_name: Subtotal
      import_transform: transform.none_if_empty(int)

    - property: Tax
      external_name: Tax
      import_transform: transform.none_if_empty(int)

    - property: Test
      external_name: Test
      import_transform: transform.regexp_bool('true', re.IGNORECASE)

    - property: Total
      external_name: Total
      import_transform: transform.none_if_empty(int)

    - property: Unconfirmed
      external_name: Unconfirmed
      import_transform: transform.regexp_bool('true', re.IGNORECASE)

    - property: UpdatedAt
      external_name: UpdatedAt
      import_transform: bulkloader_helper.import_date_time('%Y-%m-%dT%H:%M:%S')

    - property: UserId
      external_name: UserId


- kind: product
  connector: csv
  connector_options:
    encoding: utf-8
    columns: from_header
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string

    - property: AddLabel
      external_name: AddLabel
      # Type: String Stats: 4 properties of this type in this kind.

    - property: Available
      external_name: Available
      # Type: Boolean Stats: 4 properties of this type in this kind.
      import_transform: transform.regexp_bool('true', re.IGNORECASE)

    - property: Description
      external_name: Description
      # Type: String Stats: 4 properties of this type in this kind.

    - property: Excerpt
      external_name: Excerpt
      # Type: String Stats: 4 properties of this type in this kind.

    - property: HeaderImage.Alt
      external_name: HeaderImage.Alt
      # Type: String Stats: 4 properties of this type in this kind.

    - property: HeaderImage.Url
      external_name: HeaderImage.Url
      # Type: String Stats: 4 properties of this type in this kind.

    - property: HeaderImage.X
      external_name: HeaderImage.X
      # Type: Integer Stats: 4 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: HeaderImage.Y
      external_name: HeaderImage.Y
      # Type: Integer Stats: 4 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: Headline
      external_name: Headline
      # Type: String Stats: 4 properties of this type in this kind.

    - property: Id
      external_name: Id
      # Type: String Stats: 4 properties of this type in this kind.

    - property: Images.Alt
      external_name: Images.Alt
      # Type: String Stats: 5 properties of this type in this kind.

    - property: Images.Url
      external_name: Images.Url
      # Type: String Stats: 5 properties of this type in this kind.

    - property: Images.X
      external_name: Images.X
      # Type: Integer Stats: 5 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: Images.Y
      external_name: Images.Y
      # Type: Integer Stats: 5 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    # TODO: Support this property by ensuring it's not null in the datastore.
    # - property: Released
    #   external_name: Released
    #   # Type: Date/Time Stats: 4 properties of this type in this kind.
    #   import_transform: transform.import_date_time('%Y-%m-%dT%H:%M:%S')
    #   export_transform: transform.export_date_time('%Y-%m-%dT%H:%M:%S')

    - property: Slug
      external_name: Slug
      # Type: String Stats: 4 properties of this type in this kind.

    - property: Stocked
      external_name: Stocked
      # Type: Integer Stats: 4 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: Title
      external_name: Title
      # Type: String Stats: 4 properties of this type in this kind.

    - property: Variants.Color
      external_name: Variants.Color
      # Type: String Stats: 27 properties of this type in this kind.

    - property: Variants.Dimensions
      external_name: Variants.Dimensions
      # Type: String Stats: 27 properties of this type in this kind.

    - property: Variants.Id
      external_name: Variants.Id
      # Type: String Stats: 27 properties of this type in this kind.

    - property: Variants.Price
      external_name: Variants.Price
      # Type: Integer Stats: 27 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: Variants.SKU
      external_name: Variants.SKU
      # Type: String Stats: 27 properties of this type in this kind.

    - property: Variants.Size
      external_name: Variants.Size
      # Type: String Stats: 27 properties of this type in this kind.

    - property: Variants.Stock
      external_name: Variants.Stock
      # Type: Integer Stats: 27 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: Variants.Style
      external_name: Variants.Style
      # Type: String Stats: 27 properties of this type in this kind.

    - property: Variants.Weight
      external_name: Variants.Weight
      # Type: Integer Stats: 27 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)


- kind: user
  connector: csv
  connector_options:
    encoding: utf-8
    columns: from_header
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string
      import_transform: transform.create_foreign_key('user', key_is_id=True)

    - property: BillingAddress.City
      external_name: BillingAddress.City
      # Type: String Stats: 1903 properties of this type in this kind.

    - property: BillingAddress.Country
      external_name: BillingAddress.Country
      # Type: String Stats: 1903 properties of this type in this kind.

    - property: BillingAddress.Line1
      external_name: BillingAddress.Line1
      # Type: String Stats: 1903 properties of this type in this kind.

    - property: BillingAddress.Line2
      external_name: BillingAddress.Line2
      # Type: String Stats: 1903 properties of this type in this kind.

    - property: BillingAddress.PostalCode
      external_name: BillingAddress.PostalCode
      # Type: String Stats: 1903 properties of this type in this kind.

    - property: BillingAddress.State
      external_name: BillingAddress.State
      # Type: String Stats: 1903 properties of this type in this kind.

    - property: Email
      external_name: Email
      # Type: String Stats: 1903 properties of this type in this kind.

    - property: Id
      external_name: Id
      # Type: String Stats: 1903 properties of this type in this kind.

    - property: FirstName
      external_name: FirstName
      export_transform: bulkloader_helper.empty_string_if_none

    - property: LastName
      external_name: LastName
      export_transform: bulkloader_helper.empty_string_if_none

    - property: PasswordHash
      external_name: PasswordHash
      # Type: Blob Stats: 1903 properties of this type in this kind.
      import_transform: transform.bytestring_from_base64
      export_transform: base64.b64encode

    - property: Phone
      external_name: Phone
      # Type: String Stats: 1903 properties of this type in this kind.

    - property: ShippingAddress.City
      external_name: ShippingAddress.City
      # Type: String Stats: 1903 properties of this type in this kind.

    - property: ShippingAddress.Country
      external_name: ShippingAddress.Country
      # Type: String Stats: 1903 properties of this type in this kind.

      # Type: String Stats: 1903 properties of this type in this kind.
    - property: ShippingAddress.Line1
      external_name: ShippingAddress.Line1
      # Type: String Stats: 1903 properties of this type in this kind.

    - property: ShippingAddress.Line2
      external_name: ShippingAddress.Line2
      # Type: String Stats: 1903 properties of this type in this kind.

    - property: ShippingAddress.PostalCode
      external_name: ShippingAddress.PostalCode
      # Type: String Stats: 1903 properties of this type in this kind.

    - property: ShippingAddress.State
      external_name: ShippingAddress.State
      # Type: String Stats: 1903 properties of this type in this kind.

    - property: Stripe.CustomerId
      external_name: Stripe.CustomerId

    # GENERATED:
    # - property: ShippingAddress.Lines
    #   external_name: ShippingAddress.Lines
    #   export_transform: bulkloader_helper.join_address_lines

    # - property: ShippingAddress
    #   external_name: ShippingAddress
    #   export_transform: bulkloader_helper.generate_shipping_address


- kind: variant
  connector: csv
  connector_options:
    encoding: utf-8
    columns: from_header
  property_map:
    - property: __key__
      external_name: key
      export_transform: transform.key_id_or_name_as_string

    - property: Color
      external_name: Color
      # Type: String Stats: 27 properties of this type in this kind.

    - property: Dimensions
      external_name: Dimensions
      # Type: String Stats: 27 properties of this type in this kind.

    - property: Id
      external_name: Id
      # Type: String Stats: 27 properties of this type in this kind.

    - property: Price
      external_name: Price
      # Type: Integer Stats: 27 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: SKU
      external_name: SKU
      # Type: String Stats: 27 properties of this type in this kind.

    - property: Size
      external_name: Size
      # Type: String Stats: 27 properties of this type in this kind.

    - property: Stock
      external_name: Stock
      # Type: Integer Stats: 27 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)

    - property: Style
      external_name: Style
      # Type: String Stats: 27 properties of this type in this kind.

    - property: Weight
      external_name: Weight
      # Type: Integer Stats: 27 properties of this type in this kind.
      import_transform: transform.none_if_empty(int)
