<!-- Order information Form Block -->
<div class="tray tray-center">
  <div class="block row">
    <!-- Order information Form Content -->
    <order-form id="{opts._id}">
      <div class="col-md-8">
        <div id="user-shipping-address" class="panel animated fadeIn">
          <div class="panel-heading">
            Shipping Address
          </div>
          <div class="panel-body">
            <div class="section col-xs-12" style="padding:0">
              <div class="section col-lg-6 mb20">
                <control label="Recipient Name" input="{ inputs['shippingAddress.name'] }"></control>
                <control label="Street Address" input="{ inputs['shippingAddress.line1'] }"></control>
                <control label="Apt/Suite Number" input="{ inputs['shippingAddress.line2'] }"></control>
                <control label="City" input="{ inputs['shippingAddress.city'] }"></control>
                <div class="col-xs-7" style="padding-left:0">
                  <control label="State" input="{ inputs['shippingAddress.state'] }"></control>
                </div>
                <div class="col-xs-5" style="padding-right:0">
                  <control label="Postal/ZIP Code" input="{ inputs['shippingAddress.postalCode'] }"></control>
                </div>
                <control label="Country" input="{ inputs['shippingAddress.country'] }"></control>
              </div>

              <div class="section col-lg-6 mb20">
                <gmap obs="{ obs }" addressField="shippingAddress" style="min-height:340px"></gmap>
              </div>
            </div>

            <div class="section col-xs-12 mb10 has-error" if="{error}" style="padding:0">
              <span class="error-container help-block animated fadeInUp">{error.message}</span>
            </div>

            <div class="form-actions section">
              <div class="col-xs-6">
                <button type="submit" class="btn btn-block btn-dark">Save</button>
              </div>
              <div class="col-xs-6">
                <button type="reset" class="btn btn-block btn-default">Reset</button>
              </div>
            </div>

          </div>
        </div>

        <div id="refund-order" class="panel animated fadeIn" if="{ model.paymentStatus != 'refunded' }">
          <div class="panel-heading">
            Refund
          </div>
          <div class="panel-body">
            <div class="section col-xs-12" style="padding:0">
              <div class="section col-lg-6 mb20">
                <control label="Refund Amount" input="{ inputs['refundAmount'] }"></control>
              </div>
              <div class="form-actions col-lg-6 section mt30">
                <button class="btn btn-block btn-default" onclick="{ refundModal }">Refund</button>
              </div>
            </div>

            <div class="section col-xs-12 mb10 has-error" if="{error}" style="padding:0">
              <span class="error-container help-block animated fadeInUp">{error.message}</span>
            </div>

          </div>
        </div>

        <div id="order-items" class="panel animated fadeIn">
          <div class="panel-heading">
            Receipt
          </div>
          <div class="panel-body">
            <item-list obs="{ obs }">
              No Items Found
            </item-list>
          </div>
          <div class="panel-body">
            <control label="Currency" input="{ inputs.currency }" labelClasses="col-xs-2 col-xs-offset-8 text-right" controlClasses="col-xs-2 text-right"></control>
            <control label="Line Total" input="{ inputs.lineTotal }" labelClasses="col-xs-2 col-xs-offset-8 text-right" controlClasses="col-xs-2 text-right"></control>
            <control label="Discount" input="{ inputs.discount }" labelClasses="col-xs-2 col-xs-offset-8 text-right" controlClasses="col-xs-2 text-right"></control>
            <control label="Subtotal" input="{ inputs.subtotal }" labelClasses="col-xs-2 col-xs-offset-8 text-right" controlClasses="col-xs-2 text-right"></control>
            <control label="Shipping" input="{ inputs.shipping }" labelClasses="col-xs-2 col-xs-offset-8 text-right" controlClasses="col-xs-2 text-right"></control>
            <control label="Tax" input="{ inputs.tax }" labelClasses="col-xs-2 col-xs-offset-8 text-right" controlClasses="col-xs-2 text-right"></control>
            <control label="Total" input="{ inputs.total }" labelClasses="col-xs-2 col-xs-offset-8 text-right" controlClasses="col-xs-2 text-right"></control>
            <control label="Refunded" input="{ inputs.refunded }" labelClasses="col-xs-2 col-xs-offset-8 text-right" controlClasses="col-xs-2 text-right" if="{ model.refunded > 0 }"></control>
          </div>
        </div>

        <div id="metadata" class="panel animated fadeIn" if="{ Object.keys(model.metadata).length > 0 }">
          <div class="panel-heading">
            Metadata
          </div>
          <div class="panel-body">
            <pre class="form-control-static">{ JSON.stringify(model.metadata, null, 2) || '&nbsp;' }</pre>
          </div>
        </div>

        <div id="free-order-items" class="panel animated fadeIn" if="{ model.couponItems }">
          <div class="panel-heading">
            Free Coupon Items
          </div>
          <div class="panel-body">
            <item-list obs="{ obs }" itemsModel="{ 'couponItems' }">
            </item-list>
          </div>
        </div>

        <div id="gift-info" class="panel animated fadeIn" if="{ model.gift }">
          <div class="panel-heading">
            Gift Information
          </div>
          <div class="panel-body">
            <div class="section col-xs-12" style="padding:0">
              <control label="Email" input="{ inputs.giftEmail }" if="{ model.giftEmail }"></control>
              <control label="Message" input="{ inputs.giftMessage }"></control>
            </div>
          </div>
        </div>

        <div id="affiliate" class="panel animated fadeIn" if="{ model.paymentStatus != 'refunded' }">
          <div class="panel-heading">
            Refund
          </div>
          <div class="panel-body">
            <div class="section col-xs-12" style="padding:0">
              <div class="section col-lg-6 mb20">
                <control label="Refund Amount" input="{ inputs['refundAmount'] }"></control>
              </div>
              <div class="form-actions col-lg-6 section mt30">
                <button class="btn btn-block btn-default" onclick="{ refundModal }">Refund</button>
              </div>
            </div>

            <div class="section col-xs-12 mb10 has-error" if="{error}" style="padding:0">
              <span class="error-container help-block animated fadeInUp">{error.message}</span>
            </div>

          </div>
        </div>

        <div id="order-payments" class="panel animated fadeIn">
          <div class="panel-heading">
            Payments
          </div>
          <div class="panel-body">
            <payment-list path="{ 'order/'+opts.id+'/payments' }">
              No Payments Found
            </payment-list>
          </div>
        </div>

      </div>

      <div class="col-md-4">
        <div id="order-info" class="panel animated fadeIn">
          <div class="panel-heading">
            Statistics
          </div>
          <div class="panel-body">
            <div class="section col-xs-12" style="padding:0">
              <control label="ID" input="{ inputs.id }" labelclasses="col-xs-4" controlclasses="col-xs-8"></control>
              <control label="Number" input="{ inputs.number }" labelclasses="col-xs-4" controlclasses="col-xs-8"></control>
              <control label="Created" input="{ inputs.createdAt }" labelclasses="col-xs-4" controlclasses="col-xs-8"></control>
              <control label="Last Updated" input="{ inputs.updatedAt }" labelclasses="col-xs-4" controlclasses="col-xs-8"></control>
            </div>
          </div>
        </div>

        <div id="order-status" class="panel animated fadeIn">
          <div class="panel-heading">
            Status
          </div>
          <div class="panel-body">
            <control label="Status" input="{ inputs.status }" labelClasses="col-md-6" controlClasses="col-md-6"></control>
            <control label="Payment Status" input="{ inputs.paymentStatus }" labelClasses="col-md-6" controlClasses="col-md-6"></control>
            <control label="Fulfillment Status" input="{ inputs.fulfillmentStatus }" labelClasses="col-md-6" controlClasses="col-md-6"></control>
          </div>
        </div>

        <div id="order-status" class="panel animated fadeIn" if="{ model.couponCodes }">
          <div class="panel-heading">
            Coupons
          </div>
          <div class="panel-body">
            <control label="Coupon(s)" input="{ inputs.couponCodes }" labelClasses="col-md-4" controlClasses="col-md-8"></control>
          </div>
        </div>

        <div id="user-info" class="panel animated fadeIn">
          <div class="panel-heading">
            Buyer Information
          </div>
          <div class="panel-body">
            <order-user-static-form obs="{ obs }">
              <div if="{ !error }">
                <div class="section col-xs-12">
                  <div class="section row">
                    <control label="ID" input="{ inputs.id }" labelclasses="col-xs-4" controlclasses="col-xs-8"></control>
                  </div>
                  <div class="section row">
                    <control label="Email" input="{ inputs.email }" labelclasses="col-xs-4" controlclasses="col-xs-8"></control>
                  </div>
                  <div class="section row">
                    <control label="First Name" input="{ inputs.firstName }" labelclasses="col-xs-4" controlclasses="col-xs-8"></control>
                  </div>
                  <div class="section row">
                    <control label="Last Name" input="{ inputs.lastName }" labelclasses="col-xs-4" controlclasses="col-xs-8"></control>
                  </div>
                  <div class="section row">
                    <control label="Phone" input="{ inputs.phone }" labelclasses="col-xs-4" controlclasses="col-xs-8"></control>
                  </div>
                  <div class="section row">
                    <control label="Created" input="{ inputs.createdAt }" labelclasses="col-xs-4" controlclasses="col-xs-8"></control>
                 </div>
                  <div class="section row mb20">
                    <control label="Last Updated" input="{ inputs.updatedAt }" labelclasses="col-xs-4" controlclasses="col-xs-8"></control>
                  </div>
                  <div class="col-xs-12" style="padding:0">
                    <button __disabled="{ sending }" onclick="{ resendOrderConfirmation }" type="button" class="btn btn-block btn-dark">Resend Confirmation</button>
                  </div>
                  <div class="col-xs-12" if="{ parent.model.fulfillmentStatus == 'shipped' }" style="padding:0">
                    <button __disabled="{ sending }" onclick="{ resendShippingConfirmation }" type="button" class="btn btn-block btn-dark">Resend Shipping</button>
                  </div>
                  <div class="col-xs-12 mt20" style="padding:0">
                    <button if="{ parent.model.refunded }" __disabled="{ sending }" onclick="{ resendRefundConfirmation }" type="button" class="btn btn-block btn-dark">Resend Refund</button>
                  </div>
                </div>
              </div>
              <h4 if="{ error }" class="text-center mb20">
                Buyer missing or deleted.
              </h4>
            </order-user-static-form>
          </div>
        </div>

      </div>
    </order-form>
    <!-- END Order information Form Content -->
  </div>
</div>
<!-- END Order information Form Block -->
