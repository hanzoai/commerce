{% extends "base.html" %}

{% block name %}Users{% endblock %}

{% block css %}
{% endblock %}

{% block content %}
<!-- Users View Block -->
<div class="col-sm-12">
    <!-- Empty Users Block -->
    <div id="empty-table" class="row text-center text-dark-op" style="display:none;margin-top:100px">
      <i class="gi gi-money" style="font-size:100px"></i>
      <h2>We couldn't find any users for <strong>{{ ctx.organization.Name }}</strong>.</h2>
    </div>
    <!-- END Empty Users Block -->
    <div class="block full">
        <!-- Users View Title -->
        <div class="block-title">
          <h2>Users</h2>
        </div>
        <!-- END Users View Title -->

        <!-- Users View Content -->
        <div id="display" class="form-group form-inline">
        </div>
        <table id="table" class="table table-striped table-busered table-vcenter">
        </table>
        <div id="pagination" class="row text-center">
          <a href="#" class="btn btn-primary previous" data-action="previous"><strong>&lsaquo;</strong></a>
          <input class="text-center form-control" type="text" readonly="readonly" data-max-page="40" style="width:125px;display:inline;padding-top:5px"/>
          <a href="#" class="btn btn-primary next" data-action="next"><strong>&rsaquo;</strong></a>
        </div>
        <!-- END Users View Content -->
    </div>
</div>
<!-- END Users View Block -->
{% endblock %}

{% block js %}
<script src="{{ staticUrl }}/js/util.js"></script>
<script src="{{ staticUrl }}/js/table-builder.js"></script>
<script src="{{ staticUrl }}/js/jquery.jqpagination.js"></script>
<script>
$(function(){
      BuildTable($('#table'), {
        columns: [
          {
            field: 'id',
            name: 'ID',
            render: 'id',
          },
          {
            field: 'email',
            name: 'Email',
            render: 'lower',
          },
          {
            field: 'firstName',
            name: 'First Name',
          },
          {
            field: 'lastName',
            name: 'Last Name',
            render: 'lower',
          },
          {
            field: 'createdAt',
            name: 'Created At',
            render: 'date',
          },
          {
            field: 'updatedAt',
            name: 'Last Updated',
            render: 'ago',
          }
        ],
        itemUrl: '{{ urlFor("platform", "/user") }}',
        apiUrl: '{{ urlFor("api", "/user") }}',
        apiToken: '{{ ctx.organization.MustGetTokenByName("live-secret-key") }}',
        startPage: 1,
        startDisplay: 10,
        displayOptions: [5, 10, 20],
        $display: $('#display'),
        $pagination: $('#pagination'),
        $empty: $('#empty-table'),
        checkboxes: false,
      });
    })
</script>
{% endblock %}
{% block menulink %}menu-users{% endblock %}



