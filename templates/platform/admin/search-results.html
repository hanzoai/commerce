{% extends "base.html" %}

{% block name %}Search Results{% endblock %}

{% block css %}
{% endblock %}

{% block content %}
<!-- Users View Block -->
<div class="col-sm-12">
    <div class="block full">
        <!-- Users View Title -->
        <div class="block-title">
          <h2>Users</h2>
        </div>
        <!-- END Users View Title -->

        <!-- Users View Content -->
        <div id="display" class="form-group form-inline">
        </div>
        <table id="user-table" class="table table-striped table-busered table-vcenter">
        </table>
        <div id="pagination" class="row text-center">
          <a href="#" class="btn btn-primary previous" data-action="previous"><strong>&lsaquo;</strong></a>
          <input class="text-center form-control" type="text" readonly="readonly" data-max-page="40" style="width:125px;display:inline;padding-top:5px"/>
          <a href="#" class="btn btn-primary next" data-action="next"><strong>&rsaquo;</strong></a>
        </div>
        <!-- END Users View Content -->
    </div>
</div>
<!-- END Users View Block -->
{% endblock %}

{% block js %}
<script src="{{ staticUrl }}/js/util.js"></script>
<script src="{{ staticUrl }}/js/table-builder.js"></script>
<script src="{{ staticUrl }}/js/jquery.jqpagination.js"></script>
<script>
$(function(){
  var usersJSON = [
    {% for user in users %}
        {
            id: '{{ user.Id() }}',
            email: '{{ user.Email }}',
            firstName: '{{ user.FirstName }}',
            lastName: '{{ user.LastName }}',
            createdAt: '{{ user.CreatedAt.Format("2006-01-02T15:04:05Z07:00") }}',
            updatedAt: '{{ user.UpdatedAt.Format("2006-01-02T15:04:05Z07:00") }}',
        },
    {% endfor %}
  ];

  BuildTable($('#user-table'), {
    columns: [
      {
        field: 'id',
        name: 'ID',
        render: 'id',
      },
      {
        field: 'email',
        name: 'Email',
        render: 'lower',
      },
      {
        field: 'firstName',
        name: 'First Name',
      },
      {
        field: 'lastName',
        name: 'Last Name',
      },
      {
        field: 'createdAt',
        name: 'Created At',
        render: 'date',
      },
      {
        field: 'updatedAt',
        name: 'Last Updated',
        render: 'ago',
      }
    ],
    itemUrl: '{{ urlFor("platform", "/user") }}',
    startPage: 1,
    startDisplay: 10,
    displayOptions: [5, 10, 20],
    $display: $('#display'),
    $pagination: $('#pagination'),
    $empty: $('#empty-table'),
    data: usersJSON,
    checkboxes: false,
  });
})
</script>
{% endblock %}
{% block menulink %}menu-users{% endblock %}




