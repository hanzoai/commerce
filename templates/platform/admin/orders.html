{% extends "list.html" %}

{% block name %}Orders{% endblock %}

{% block css %}
{% endblock %}

{% block content %}
<!-- Orders View Block -->
<div class="col-sm-12">
    <div class="block full">
        <!-- Orders View Title -->
        <div class="block-title">
          <h2>Orders</h2>
        </div>
        <!-- END Orders View Title -->

        <!-- Orders View Content -->
        <table id="table" class="table table-striped table-bordered table-vcenter">
        </table>
        <div class="row text-center">
            <i class="fa fa-circle-o-notch fa-3x fa-spin text-primary"></i>
        </div>
        <!-- END Orders View Content -->
    </div>
</div>
<!-- END Orders View Block -->
{% endblock %}

{% block js %}
<script src="{{ staticUrl }}/js/table-builder.js"></script>
<script src="{{ staticUrl }}/js/jquery-placeholder.js"></script>
<script>
  var paged = BuildTable($('#table'), {
    columns: [
      {
        field: 'id',
        name: 'ID',
        css: {
          width: '50px',
        }
      },
      {
        field: 'payments.0.account.buyer.firstName',
        name: 'First Name',
      },
      {
        field: 'payments.0.account.buyer.lastName',
        name: 'Last Name',
      },
      {
        field: 'payments.0.account.buyer.email',
        name: 'Email',
      },
      {
        field: 'total',
        name: 'Paid',
        type: 'currency',
      },
      {
        field: 'total',
        name: 'Owed',
        type: 'currency',
      },
      {
        field: 'createdAt',
        name: 'Order Date',
        type: 'date',
      }
    ],
    api: '{{ urlFor("api", "/order2") }}',
    apiToken: '{{ org.MustGetTokenByName("live-secret-key") }}',
    startPage: 1,
    startDisplay: 10,
    display: [5, 10, 2],
  });
</script>
{% endblock %}
{% block menulink %}menu-orders{% endblock %}


