{% extends "base.html" %}

{% block name %}Products{% endblock %}

{% block css %}
{% endblock %}

{% block content %}
<!-- Products/Variants/Collections View Block -->
<div class="col-sm-12">
  <div class="block" style="padding-bottom:0px">
    <!-- Products/Variants/Collections Switch Block -->
    <div class="block-title">
      <ul class="nav nav-tabs" data-toggle="tabs">
        <li class="active"><a href="">Products</a></li>
        <!-- <li class=""><a href="">Variants</a></li> -->
        <!-- <li class=""><a href="">Collections</a></li> -->
      </ul>
    </div>
    <!-- END Products/Variants/Collections Switch Block -->
  </div>
</div>
<!-- END Products/Variants/Collections View Block -->

<!-- Products View Block -->
<div class="col-sm-12">
  <div class="block full">
    <!-- Products View Title -->
    <div class="block-title">
      <h2>Products</h2>
    </div>
    <!-- END Products View Title -->

    <!-- Products View Content -->
    <div id="display" class="form-group form-inline">
    </div>
    <table id="table" class="table table-striped table-bordered table-vcenter">
    </table>
    <div id="pagination" class="row text-center">
      <a href="#" class="btn btn-primary previous" data-action="previous"><strong>&lsaquo;</strong></a>
      <input class="text-center form-control" type="text" readonly="readonly" data-max-page="40" style="width:125px;display:inline;padding-top:5px"/>
      <a href="#" class="btn btn-primary next" data-action="next"><strong>&rsaquo;</strong></a>
    </div>
    <!-- <div class="row text-center"> -->
    <!--     <i class="fa fa-circle-o-notch fa-3x fa-spin text-primary"></i> -->
    <!-- </div> -->
  </div>
</div>
<!-- END Products View Block -->

<!-- New Products View Block -->
<div class="col-sm-12">
  <div class="block">
    <div class="block-title">
      <h2>New Product</h2>
    </div>
    <form id="form-new-product" method="post" class="form-horizontal">
      <div class="row">
        <div class="col-md-6">
          <h4>What is your product?</h4>
          <div id="product-info" class="block">
          </div>
        </div>
        <div class="col-md-6">
          <h4>What is its cost and availability?</h4>
          <div class="row">
            <div id="product-cost" class="block">
            </div>
          </div>
          <h4>What are its shipping dimensions? (Optional)</h4>
          <div class="row">
            <div id="product-shipping" class="block">
            </div>
          </div>
        </div>
      </div>
      <div class="form-group form-actions text-center">
        <button type="submit" class="btn btn-effect-ripple btn-primary"><i class="fa fa-plus"></i> Add</button>
      </div>
    </form>
    <!-- END Products View Content -->
  </div>
</div>
<!-- END New Products View Block -->
{% endblock %}

{% block js %}
<script src="{{ staticUrl }}/js/form-builder.js"></script>
<script src="{{ staticUrl }}/js/table-builder.js"></script>
<script src="{{ staticUrl }}/js/jquery.jqpagination.js"></script>
<script>
  $(function(){
    BuildTable($('#table'), {
      columns: [
        {
          field: 'id',
          name: 'ID',
          css: {
            width: '50px',
          },
          render: 'id',
        },
        {
          field: 'name',
          name: 'Name',
        },
        {
          field: 'slug',
          name: 'Slug',
        },
        {
          field: 'price',
          name: 'Price',
          render: 'currency',
        },
        {
          field: 'taxable',
          name: 'Collect Taxes',
          render: 'bool',
        },
        {
          field: 'available',
          name: 'Available',
          render: 'bool',
        },
        {
          field: 'createdAt',
          name: 'Order Date',
          render: 'date',
        }
      ],
      api: '{{ urlFor("api", "/product2") }}',
      apiToken: '{{ org.MustGetTokenByName("live-secret-key") }}',
      startPage: 1,
      startDisplay: 5,
      displayOptions: [5, 10, 20],
      $display: $('#display'),
      $pagination: $('#pagination'),
    });

    BuildForm($('#form-new-product'),[
// product info
        {
          id: 'name',
          name: 'Product.Name',
          label: 'Name',
          type: 'text',
          asterisk: false,
          rules: [
            {
              rule: 'required',
              value: true,
              message: 'Please enter a name for your product'
            }
          ],
          $parent: $('#product-info')
        },
        {
          id: 'slug',
          name: 'Product.Slug',
          label: 'Slug',
          type: 'text',
          asterisk: false,
          rules: [
            {
              rule: 'required',
              value: true,
              message: 'Please enter a unique URL identifier for your product'
            }
          ],
          $parent: $('#product-info')
        },
        {
          id: 'Description',
          name: 'Product.Description',
          label: 'Description',
          type: 'textarea',
          $parent: $('#product-info')
        },
// product cost
        {
          id: 'price',
          name: 'Product.Price',
          label: 'Price',
          type: 'text',
          asterisk: false,
          rules: [
            {
              rule: 'required',
              value: true,
              message: 'Enter a price for your product'
            },
            {
              rule: 'currency',
              value: ['$,€,£', false],
              message: 'Enter a valid currency $, €, £'
            }
          ],
          $parent: $('#product-cost')
        },
        {
          id: 'currency',
          name: 'Product.Currency',
          label: 'Currency',
          value: [
            {
              id: 'usd',
              name: '$ USD',
              selected: true,
            },
            {
              id: 'aud',
              name: '$ AUD',
            },
            {
              id: 'cad',
              name: '$ CAD',
            },
            {
              id: 'eur',
              name: '€ EUR',
            },
            {
              id: 'gbp',
              name: '£ GBP',
            }
          ],
          type: 'select',
          asterisk: false,
          rules: [
            {
              rule: 'required',
              value: true,
              message: 'Choose a currency for your product'
            }
          ],
          $parent: $('#product-cost')
        },
        {
          id: 'taxable',
          name: 'Product.Taxable',
          label: 'Do you wish to collect taxes for this product?',
          type: 'switch',
          value: true,
          asterisk: false,
          rules: [
            {
              rule: 'required',
              value: true,
              message: 'Choose if this item is taxed'
            },
          ],
          $parent: $('#product-cost')
        },
        {
          id: 'available',
          name: 'Product.Available',
          label: 'Is this available for purchase?',
          type: 'switch',
          value: true,
          asterisk: false,
          rules: [
            {
              rule: 'required',
              value: true,
              message: 'Choose if this item is visible in the store'
            },
          ],
          $parent: $('#product-cost')
        },
        {
          id: 'dimensions',
          name: 'Product.Dimensions',
          label: 'Size (L x W x H)',
          type: 'text',
          placeholder: '10cm x 10cm x 10cm',
          $parent: $('#product-shipping')
        },
        {
          id: 'weight',
          name: 'Product.Weight',
          label: 'Weight (grams)',
          type: 'text',
          placeholder: '1000',
          $parent: $('#product-shipping')
        },
    ]);
  });
</script>
{% endblock %}
{% block menulink %}menu-orders{% endblock %}



