{% extends "base.html" %}

{% block name %}User{% endblock %}

{% block css %}
{% endblock %}

{% block content %}
<!-- User information Form Block -->
<div class="col-sm-10 col-sm-offset-1 col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-1">
    <div class="block">
        <!-- User information Form Title -->
        <div class="block-title">
            <h2>User Information</h2>
        </div>
        <!-- END User information Form Title -->

        <!-- User information Form Content -->
        <user-form>
          <h4>
            <a data-toggle="collapse" href="#user-info">
              Information
            </a>
          </h4>
          <div id="user-info" class="collapse in block">
              <control label="ID" input="{ inputs.id }"></control>
              <control label="Email" input="{ inputs.email }"></control>
              <control label="First Name" input="{ inputs.firstName }"></control>
              <control label="Last Name" input="{ inputs.lastName }"></control>
              <control label="Phone" input="{ inputs.phone }"></control>
              <control label="Created On" input="{ inputs.createdAt }"></control>
              <control label="Last Updated On" input="{ inputs.updatedAt }"></control>
              <div class="form-group form-actions">
                <div class="col-md-9 col-md-offset-3">
                    <button type="submit" class="btn btn-effect-ripple btn-primary">Save</button>
                  <button type="reset" class="btn btn-effect-ripple btn-warning">Reset</button>
                </div>
              </div>
          </div>
          <h4>
            <a data-toggle="collapse" href="#user-reset-password">
              Reset Password
            </a>
          </h4>
          <div id="user-reset-password" class="collapse in block">
              <reset-password-form userId="{ opts.userId }", url ="{ opts.url }" token="{ opts.token }">
            </reset-password-form>
          </div>
          <h4>
            <a data-toggle="collapse" href="#user-shipping-address">
              Shipping Address
            </a>
          </h4>
          <div id="user-shipping-address" class="collapse in block">
              <control label="Street Address" input="{ inputs['shippingAddress.line1'] }"></control>
              <control label="Apt/Suite Number" input="{ inputs['shippingAddress.line2'] }"></control>
              <control label="City" input="{ inputs['shippingAddress.city'] }"></control>
              <control label="State" input="{ inputs['shippingAddress.state'] }"></control>
              <control label="Postal/ZIP Code" input="{ inputs['shippingAddress.postalCode'] }"></control>
              <control label="Country" input="{ inputs['shippingAddress.country'] }"></control>
              <div class="form-group form-actions">
                <div class="col-md-9 col-md-offset-3">
                    <button type="submit" class="btn btn-effect-ripple btn-primary">Save</button>
                  <button type="reset" class="btn btn-effect-ripple btn-warning">Reset</button>
                </div>
              </div>
          </div>
          <h4>
            <a data-toggle="collapse" href="#user-billing-address">
              Billing Address
            </a>
          </h4>
          <div id="user-billing-address" class="collapse in block">
              <control label="Street Address" input="{ inputs['billingAddress.line1'] }"></control>
              <control label="Apt/Suite Number" input="{ inputs['billingAddress.line2'] }"></control>
              <control label="City" input="{ inputs['billingAddress.city'] }"></control>
              <control label="State" input="{ inputs['billingAddress.state'] }"></control>
              <control label="Postal/ZIP Code" input="{ inputs['billingAddress.postalCode'] }"></control>
              <control label="Country" input="{ inputs['billingAddress.country'] }"></control>
              <div class="form-group form-actions">
                <div class="col-md-9 col-md-offset-3">
                    <button type="submit" class="btn btn-effect-ripple btn-primary">Save</button>
                  <button type="reset" class="btn btn-effect-ripple btn-warning">Reset</button>
                </div>
              </div>
          </div>
          <h4>
            <a data-toggle="collapse" href="#user-orders">
              Orders
            </a>
          </h4>
          <div id="user-orders" class="collapse in block">
            <order-list path="{ 'user/'+opts.userId+'/orders' }">
            </order-list>
          </div>
          <h4>
            <a data-toggle="collapse" href="#user-balance">
              Credit Balance
            </a>
          </h4>
          <div id="user-balance" class="collapse in block">
            <balance-widget userId="{opts.userId}">
            </balance-widget>
          </div>
          <h4>
            <a data-toggle="collapse" href="#user-referrers">
              Referral Tokens
            </a>
          </h4>
          <div id="user-referrals" class="collapse in block">
            <referrer-list path="{ 'user/'+opts.userId+'/referrers' }">
            </referrer-list>
          </div>
          <h4>
            <a data-toggle="collapse" href="#user-referrals">
              Referrals
            </a>
          </h4>
          <div id="user-referrals" class="collapse in block">
            <referral-list path="{ 'user/'+opts.userId+'/referrals' }">
            </referral-list>
          </div>
        </user-form>
        <!-- END User information Form Content -->
    </div>
    <!-- END User information Form Block -->
</div>
<!-- END User information Form Block -->
{% endblock %}

{% block js %}
<script>
  var countries = {
    {% for country in constants.Countries %}
        '{{ country.ISO3166OneAlphaTwo }}': '{{ country.ISO3166OneEnglishShortNameReadingOrder }}',
    {% endfor %}
  }

  var currencies = {
    {% for type in constants.CurrencyTypes %}
      '{{ type }}': '{{ type.Label() }}',
    {% endfor %}
  }

  $(function(){
    var urlParts = window.location.pathname.split('/')
    var userId = urlParts.pop()

      new crowdcontrol.data.Api(
          '{{ urlFor("api") }}',
          '{{ ctx.organization.MustGetTokenByName("live-secret-key") }}'
      ).register('crowdstart')

    riot.mount('user-form', {userId: userId})
  })

</script>
{% endblock %}
{% block menulink %}menu-users{% endblock %}

