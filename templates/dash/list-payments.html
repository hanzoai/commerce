{% extends "base.html" %}

{% block name %}Payments{% endblock %}

{% block css %}
{% endblock %}

{% block content %}
<!-- Payments View Block -->
<div class="col-sm-12">
    <!-- Empty Payments Block -->
    <div id="empty-table" class="row text-center text-dark-op" style="display:none;margin-top:100px">
      <i class="gi gi-money" style="font-size:100px"></i>
      <h2>We couldn't find any payments for <strong>{{ ctx.organization.Name }}</strong>.</h2>
    </div>
    <!-- END Empty Payments Block -->
    <div class="block full">
        <!-- Payments View Title -->
        <div class="block-title">
          <h2>Payments</h2>
        </div>
        <!-- END Payments View Title -->

        <!-- Payments View Content -->
        <div id="display" class="form-group form-inline">
        </div>
        <table id="table" class="table table-striped table-bpaymented table-vcenter">
        </table>
        <div id="pagination" class="row text-center">
          <a href="#" class="btn btn-primary previous" data-action="previous"><strong>&lsaquo;</strong></a>
          <input class="text-center form-control" type="text" readonly="readonly" data-max-page="40" style="width:125px;display:inline;padding-top:5px"/>
          <a href="#" class="btn btn-primary next" data-action="next"><strong>&rsaquo;</strong></a>
        </div>
        <!-- END Payments View Content -->
    </div>
</div>
<!-- END Payments View Block -->
{% endblock %}

{% block js %}
<script src="{{ staticUrl }}/js/util.js"></script>
<script src="{{ staticUrl }}/js/table-builder.js"></script>
<script src="{{ staticUrl }}/js/jquery.jqpagination.js"></script>
<script>
$(function(){
      BuildTable($('#table'), {
        columns: [
          {
            field: 'id',
            name: 'ID',
            css: {
              width: '50px',
            },
            render: 'id',
          },
          {
            field: 'userId',
            name: 'User ID',
            href: '{{ urlFor("api", "/user") }}',
            render: 'link',
          },
          {
            field: 'currency',
            name: 'Currency',
            render: 'upper',
          },
          {
            field: 'total',
            name: 'Total',
            render: 'currency',
          },
          {
            field: 'status',
            name: 'Status',
          },
          {
            field: 'createdAt',
            name: 'Created At',
            render: 'date',
          },
          {
            field: 'updatedAt',
            name: 'Last Updated',
            render: 'ago',
          }
        ],
        itemUrl: '{{ urlFor("platform", "/payment") }}',
        apiUrl: '{{ urlFor("api", "/payment") }}',
        apiToken: '{{ ctx.organization.MustGetTokenByName("live-secret-key") }}',
        startPage: 1,
        startDisplay: 10,
        displayOptions: [5, 10, 20],
        $display: $('#display'),
        $pagination: $('#pagination'),
        $empty: $('#empty-table'),
        checkboxes: false,
      });
    })
</script>
{% endblock %}
{% block menulink %}menu-payments{% endblock %}



