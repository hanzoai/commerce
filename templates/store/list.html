{% extends "../base.html" %}

{% block header_content %}
<div class="banner-image content-fill" style="overflow: hidden;">
    <img data-src="/img/140810 Hero V37 Exports.Still046.jpg" data-image-dimensions="1000x562" data-image-focal-point="0.5433884297520661,0.15441176470588236" alt="140810 Hero V37 Exports.Still046.jpg" class="" src="/img/140810 Hero V37 Exports.Still046.jpg" data-image-resolution="1500w" style="top: -5px; left: 0px; width: 1351px; height: 760px; position: relative;">
</div>

<div class="title-desc-wrapper has-main-image no-description" data-collection-field="main-image">
    <div class="title-desc-inner" data-collection-id="544a257de4b015b5ef71847c" id="yui_3_17_2_1_1414178453970_237">
        <h1 class="page-title" data-shrink-original-size="33" style="letter-spacing: 0.212121212121212em;">Store</h1>
        <br>

    </div>
</div>
{% endblock %}

{% block content %}
<div id="productList">
    {% for product in products %}
    <a href="/products/{{ product.Slug }}" class="product hentry post-type-store-item article-index-1" id="thumb-skully-{{ product.Slug }}">
        <div>
            <div class="product-image">
                <div class="intrinsic">
                    <div style="overflow: hidden;">
                      <img data-image="{{ product.DisplayImage().Url }}" data-image-dimensions="2500x1406" data-image-focal-point="0.5,0.5" data-load="false" alt="{{ product.DisplayImage().Url }}" class="loaded" src="{{ product.DisplayImage().Url }}" data-image-resolution="750w" style="top: 0px; left: -117px; width: 536px; height: 301px; position: relative;">
                    </div>
                </div>
            </div>

            <div class="product-overlay">
                <div class="product-meta">
                  <div class="product-title">{{ product.Title }}</div>
                  <div class="product-price">
                      <span class="sqs-money-native">{{ product.DisplayPrice() }}</span>
                  </div>
                </div>
            </div>
        </div>
    </a>
    {% endfor %}

    <!-- PAGINATION -->
</div>



<script type="text/javascript">
    Y.use('squarespace-image-loader', function(Y) {
        Y.on('domready', function() {

            var productImages = Y.all('#productList img[data-src]');

            if (!productImages.isEmpty()) {

                // center product list titles when overlaid
                centerTitles();

                Y.Global.on('tweak', function(f) {
                    var name = f.getName();

                    if (name === 'product-list-titles') {
                        centerTitles();
                    } else if (name === 'product-image-auto-crop') {
                        refreshImages();
                    }
                });

                // NOTE: brickwall isn't guaranteed to be instantiated here. -naz
                refreshImages();

                Y.on(['load', 'resize'], refreshImages, Y.config.win);

            };




            // --------------------------------------------------------------------------------
            // PRODUCT HELPER FUNCTIONS
            // --------------------------------------------------------------------------------

            function centerTitles() {
                if (!Y.one('html.touch')) {
                    Y.all('.product-list-titles-overlay .product-meta').each(function(n) {
                        n.setStyle('margin-top', -(parseInt(n.getComputedStyle('height'), 10) / 2) + 'px');
                    });
                }
            }

            function refreshImages() {

                var autoCropMode = 'fit';
                if (Y.Squarespace.Template.getTweakValue('product-image-auto-crop') == "true") {
                    autoCropMode = 'fill'
                }
                productImages.plug(Y.Squarespace.Loader2, {
                    mode: autoCropMode
                });

                productImages.each(function(imageEl) {
                    ImageLoader.load(imageEl, {
                        load: true,
                        mode: autoCropMode
                    });
                });

            }

        });
    });
</script>
</div>

{% endblock %}
