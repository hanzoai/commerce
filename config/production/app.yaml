application: crowdstart-io
module: default
version: v1

runtime: go
api_version: go1
threadsafe: true

inbound_services:
- warmup

handlers:
- url: /_ah/*
  script: _go_app

- url: /*
  static_dir: static

pagespeed:
    enabled_rewriters:
    # HTML
    - ProxyCss
    - ProxyImages
    - ProxyJs
    - ConvertMetaTags
    - InlineCss
    - InlineJs
    - InlineImages
    - InlinePreviewImages - default
    - CollapseWhitespace
    - CombineHeads
    - ElideAttributes
    - RemoveComments
    - RemoveQuotes
    - LeftTrimUrls

    # css
    - CombineCss - default
    - MoveCssToHead - default
    - MinifyCss

    # images
    - WebpOptimization
    # - ImageConvertToJpeg
    - ImageRecompressJpeg
    - ImageProgressiveJpeg
    - ImageRecompressPng
    - ImageStripMetadata
    - ImageStripColorProfile
    # - ImageResize
    # - LazyloadImages
    - ImageAddDimensions

    # js
    - CombineJs - default
    - JsOptimize - default
    - DeferJs

    disabled_rewriters:
    - FlushSubresources
